(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aad17"],{1343:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add_click}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.getTreeData}},[e._v("授权")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:this.delete}},[e._v("删除")]),e._v(" "),a("el-table",{attrs:{data:this.tableData,border:"",stripe:"",size:"small"},on:{"selection-change":this.selectRow}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.edit_click(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色中文名",prop:"nameZh"}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1),e._v(" "),a("el-dialog",{attrs:{title:"角色菜单分配",visible:e.authDialogVisible},on:{"update:visible":function(t){e.authDialogVisible=t}}},[a("el-tree",{attrs:{data:this.treeData,"show-checkbox":""}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.btnState,visible:e.editDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{attrs:{"label-width":"90px"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[a("el-form-item",{attrs:{label:"角色名"}},[a("el-input",{model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文名"}},[a("el-input",{model:{value:e.role.nameZh,callback:function(t){e.$set(e.role,"nameZh",t)},expression:"role.nameZh"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.role.remark,callback:function(t){e.$set(e.role,"remark",t)},expression:"role.remark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.btnState))])],1)],1)],1)},i=[],o=(a("ac6a"),a("b775"));function n(){return Object(o["a"])({url:"/role/allroles",method:"get"})}function s(e){return Object(o["a"])({url:"/role/addrole",method:"post",data:e})}function r(e){return Object(o["a"])({url:"/role/delete",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/role/update",method:"post",data:e})}a("7f7f");var u=a("5c96");function d(){return Object(o["a"])({url:"/treemenus",method:"get"})}var b={components:{},data:function(){return{tableData:[],btnState:"",editDialogVisible:!1,authDialogVisible:!1,role:{name:"",nameZh:"",remark:""},selectedList:[],treeData:[]}},created:function(){this.fetchData()},methods:{getTreeData:function(){var e=this;d().then((function(t){console.log(t),e.treeData=t.data.data})),this.authDialogVisible=!0},fetchData:function(){var e=this;n().then((function(t){e.tableData=t.data.roles}))},selectRow:function(e,t){var a=this;this.selectedList=[],console.log(e),e.forEach((function(e){a.selectedList.push(e.id)}))},submit:function(){var e=this;"新增"===this.btnState?s(e.role).then((function(t){var a=t.success;a?(e.fetchData(),e.editDialogVisible=!1,e.role={}):u["Message"].info(t.msg)})):c(e.role).then((function(t){var a=t.success;a?(e.fetchData(),e.editDialogVisible=!1,e.role={}):u["Message"].info(t.msg)})),this.btnState=""},delete:function(){var e=this;0===this.selectedList.length?u["Message"].error("请选择要删除的角色！"):r(e.selectedList).then((function(t){u["Message"].success("删除成功"),e.fetchData(),e.selectedList=[]}))},add_click:function(){this.btnState="新增",this.role={},this.editDialogVisible=!0},edit_click:function(e){this.btnState="修改",this.role=e,this.editDialogVisible=!0}}},h=b,f=a("2877"),m=Object(f["a"])(h,l,i,!1,null,null,null);t["default"]=m.exports}}]);